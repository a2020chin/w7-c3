{"version":3,"sources":["all.js"],"names":["formElement","document","querySelector","originData","data","c3Obj","c3Array","addEventListener","event","preventDefault","name","value","trim","imgUrl","area","price","group","rate","description","error_name","error_imgUrl","error_area","error_price","error_group","error_rate","reFilter","validity","valid","innerHTML","console","log","push","length","reset","render","c3Data","init","_url","axios","get","then","res","arr","ticketList","filterNum","str","forEach","item","content","filterGroup","e","target","newData","filter","chart","c3","generate","bindto","size","height","width","columns","Object","entries","type","donut","label","show","title"],"mappings":"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","file":"all.js","sourcesContent":["//新增資料\nconst formElement = document.querySelector('.js_form')\nlet originData = {}\nlet data = {}\nlet c3Obj = {}\nlet c3Array = []\n\nformElement.addEventListener('submit', (event) => {\n  event.preventDefault()\n  let name = formElement[0].value.trim()\n  let imgUrl = formElement[1].value.trim()\n  let area = formElement[2].value.trim()\n  let price = formElement[3].value.trim()\n  let group = formElement[4].value.trim()\n  let rate = formElement[5].value.trim()\n  let description = formElement[6].value.trim()\n\n  const error_name = document.querySelector('.js_error_name')\n  const error_imgUrl = document.querySelector('.js_error_imgUrl')\n  const error_area = document.querySelector('.js_error_area')\n  const error_price = document.querySelector('.js_error_price')\n  const error_group = document.querySelector('.js_error_group')\n  const error_rate = document.querySelector('.js_error_rate')\n\n  const reFilter = document.querySelector('.js_filterGroup')\n\n  if(!formElement[0].validity.valid){\n    error_name.innerHTML = `套票名稱不能為空`\n  }else{\n    error_name.innerHTML = ''\n  }\n  if(!formElement[1].validity.valid){\n    if(formElement[1].value == ''){\n      error_imgUrl.innerHTML = `圖片網址不能為空`\n    }else{\n      error_imgUrl.innerHTML = `圖片網址格式錯誤`\n    }\n  }else{\n    error_imgUrl.innerHTML = ''\n  }\n  if(!formElement[2].validity.valid){\n    error_area.innerHTML = `請選擇景點地區`\n  }else{\n    error_area.innerHTML = ''\n  }\n  if(!formElement[3].validity.valid){\n    if(formElement[3].value == ''){\n      error_price.innerHTML = `請輸入套票金額`\n    }else{\n      error_price.innerHTML = `套票金額格式錯誤`\n    }\n  }else{\n    error_price.innerHTML = ''\n  }\n  if(!formElement[4].validity.valid){\n    if(formElement[4].value == ''){\n      error_group.innerHTML = `請輸入套票組數`\n    }else{\n      error_group.innerHTML = `套票組數格式錯誤`\n    }\n  }else{\n    error_group.innerHTML = ''\n  }\n  if(!formElement[5].validity.valid){\n    if(formElement[5].value == ''){\n      error_rate.innerHTML = `請輸入套票星級`\n    }else{\n      error_rate.innerHTML = `套票星級格式錯誤`\n    }\n  }else{\n    error_rate.innerHTML = ''\n  }\n\n  if(formElement[0].validity.valid &&\n    formElement[1].validity.valid &&\n    formElement[2].validity.valid &&\n    formElement[3].validity.valid &&\n    formElement[4].validity.valid &&\n    formElement[5].validity.valid &&\n    formElement[6].validity.valid){\n    console.log(data)\n\n\n\n    console.log(name,imgUrl,area,price,group,rate,description);\n\n    originData.push({\n        \"id\": data.length,\n        name,\n        imgUrl,\n        area,\n        description,\n        group,\n        price,\n        rate,\n    })\n    formElement.reset()\n    error_name.innerHTML = ''\n    error_imgUrl.innerHTML = ''\n    error_area.innerHTML = ''\n    error_price.innerHTML = ''\n    error_group.innerHTML = ''\n    error_rate.innerHTML = ''\n    reFilter.value = '全部地區'\n    console.log(originData)\n    render(originData);\n    c3Data()\n  }\n})\n\n//渲染畫面\nconst init = () =>{\n  const _url = 'https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json'\n  axios.get(_url).then((res) => {\n    originData = res.data.data\n    data = originData\n    render(originData)\n    c3Data()\n  }).catch(()=>{\n    console.log('error')\n  })\n}\ninit();\n\n\nconst render = (arr) => {\n  const ticketList = document.querySelector('.js_ticketList')\n  const filterNum = document.querySelector('.js_filter')\n  let str = ''\n  arr.forEach((item)=>{\n\n    let content = `\n      <li\n        class=\"col-span-4 bg-white shadow-[0px_3px_6px_#00000029] rounded\"\n      >\n        <div class=\"relative\">\n          <img\n            class=\"block w-full h-[180px] object-cover rounded-t\"\n            src=\"${item.imgUrl}\"\n            alt=\"\"\n          />\n          <div\n            class=\"absolute px-5 py-2 bg-secondary text-white text-xl rounded-r top-0 -translate-y-1/4\"\n          >\n          ${item.area}\n          </div>\n          <div\n            class=\"absolute px-2 py-[5px] bg-primary text-white rounded-r bottom-0 translate-y-1/2\"\n          >\n          ${item.rate}\n          </div>\n        </div>\n        <div\n          class=\"flex flex-col justify-between h-[calc(100%_-_180px)] p-5\"\n        >\n          <div>\n            <h3\n              class=\"text-primary text-2xl font-medium pb-1 mb-4 border-b-2 border-b-primary\"\n            >\n            ${item.name}\n            </h3>\n            <p class=\"mb-5\">\n            ${item.description}\n            </p>\n          </div>\n          <div class=\"flex justify-between items-center\">\n            <p class=\"text-primary\">\n              <span class=\"material-symbols-outlined align-middle mr-[6px]\">\n                error\n              </span>\n              剩下最後 <span id=\"ticketCard-num\"> ${item.group} </span> 組\n            </p>\n            <p class=\"flex items-center text-primary\">\n              TWD\n              <span\n                class=\"font-roboto text-[32px] ml-1\"\n                id=\"ticketCard-price\"\n              >\n                $${item.price}\n              </span>\n            </p>\n          </div>\n        </div>\n      </li>\n    `\n    str += content\n  })\n  ticketList.innerHTML = str\n  filterNum.innerHTML = `搜尋資料為 ${arr.length} 筆`\n}\n\n\nconst filterGroup = document.querySelector('.js_filterGroup')\nfilterGroup.addEventListener('change', (e) => {\n  if(e.target.value == '全部地區'){init()}else{\n    const newData = data.filter((item) => {\n      return item.area == e.target.value\n    })\n    render(newData)\n  }\n})\n\nconst c3Data = () => {\n  originData.forEach((item)=>{\n    c3Obj[item.area] ? c3Obj[item.area] += 1 : c3Obj[item.area] = 1\n  })\n\n  const chart = c3.generate({\n    bindto: '#chart',\n    size: {\n      height: 250,\n      width: 480\n    },\n    data: {\n      columns: Object.entries(c3Obj),\n      type : 'donut',\n    },\n    \n    donut: { \n      label: {\n        show: false\n      },\n      title: \"套票地區比重\",\n      width: 20 \n    }\n  });\n}\n\n"]}